
@{
    ViewData["Title"] = "Fetch";
}

<h1>Fetch</h1>
<img id="img1" />

@section Scripts{ 
    <script>
        @*fetch("@Url.Content("~/api/index")")
            .then(response => {
                //console.log(response.text()); //得到又是另外一個promise物件
                return response.text(); //純文字 response.json();
            
                //if (!response.ok) throw new Error(response.statusText)
        }).then(data => {
            console.log(data)
        })*@

        @*fetch("@Url.Content("~/api/GetImageBytes/6")")
            .then(response => response.blob())
            .then(datas => {
                const myImg = document.querySelector("#img1");
                myImg.src = URL.createObjectURL(datas);
            })*@

        @*fetch("@Url.Content("~/api/members")")
            .then(response => response.json())
            .then(datas => console.log(datas));

        async function LoadMembers() {
            const response = await fetch("@Url.Content("~/api/members")");
            const datas = await response.json();
            datas.forEach(member => {
                console.log(member.name)
            });
        }
        LoadMembers();*@
    </script>
}